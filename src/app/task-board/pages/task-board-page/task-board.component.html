<div class="simply-task-board__container">
	@if (device() !== Devices.WideScreen) {
		<simply-task-group cdkDropListGroup>
			@for (status of taskStatuses; track status) {
				<button
					cdkDropList
					simplyTaskGroupTab
					[active]="activeStatus() === status"
					[taskStatus]="status"
					(click)="selectStatus(status)"
					[id]="'TAB_' + status"
					(cdkDropListDropped)="updateTask($event, status)"
					(cdkDropListEntered)="switchTab(status)"
				>
					<mat-icon [attr.aria-label]="status">{{
						taskStatusIcon.get(status)
					}}</mat-icon>
					@if (device() !== Devices.HandsetPortrait) {
						<h3 simplyNoSpace>{{ status }}</h3>
					}
				</button>
			}
			@for (status of taskStatuses; track status) {
				<div
					cdkDropList
					simplyTaskGroupList
					[active]="status === activeStatus()"
					[taskStatus]="status"
					[id]="status"
					[cdkDropListData]="taskStatusListItems[$index]()"
					(cdkDropListDropped)="updateTask($event)"
				>
					@for (task of taskStatusListItems[$index](); track task.id) {
						<app-task-card
							cdkDrag
							(editTask)="editTask($event)"
							[task]="task"
						></app-task-card>
					}
				</div>
			}

			<button
				mat-mini-fab
				color="accent"
				routerLink="task"
				simplyTaskGroupAddButton
			>
				<mat-icon>add</mat-icon>
			</button>
		</simply-task-group>
	} @else {
		<div class="task-board-kanban__container">
			<div class="task-board-kanban__action-menu">
				<button mat-flat-button color="accent" routerLink="task">
					Add task
				</button>
			</div>
			<div class="task-board-kanban__list-container" cdkDropListGroup>
				@for (status of taskStatuses; track status) {
					<app-task-list
						cdkDropList
						[id]="status"
						[cdkDropListData]="taskListSignal(status)()"
						(cdkDropListDropped)="updateTask($event)"
						(dblclick)="newTask()"
						[taskStatus]="status"
					>
						@for (task of taskListSignal(status)(); track task.id) {
							<app-task-card
								cdkDrag
								(editTask)="editTask($event)"
								[task]="task"
							></app-task-card>
						}
					</app-task-list>
				}
			</div>
		</div>
	}
</div>
