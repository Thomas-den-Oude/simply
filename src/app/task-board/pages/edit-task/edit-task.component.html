<simply-center-page>
	<form [formGroup]="taskForm" (ngSubmit)="submitTask()">
		<mat-form-field simplySpaceContent="regular">
			<mat-label>Task title</mat-label>
			<input matInput formControlName="title" simplyFocusInput />
		</mat-form-field>

		<mat-form-field
			class="simply-edit-task__status"
			simplySpaceContent="regular"
		>
			<mat-select formControlName="status">
				<mat-option
					class="simply-edit-task__current-status"
					[value]="currentStatus()"
					>{{ currentStatus() }}</mat-option
				>

				@for (status of availableStatuses(); track status) {
					<mat-option [value]="status">
						<mat-icon>{{ taskStatusIcon.get(status) }}</mat-icon
						>{{ status }}</mat-option
					>
				}
			</mat-select>
			<mat-icon matPrefix>{{ taskStatusIcon.get(currentStatus()) }}</mat-icon>
		</mat-form-field>

		<mat-form-field simplySpaceContent="regular">
			<mat-label>Task description</mat-label>
			<textarea
				cdkTextareaAutosize
				[cdkAutosizeMinRows]="textAreaMinRows()"
				[cdkAutosizeMaxRows]="textAreaMaxRows()"
				matInput
				formControlName="description"
			></textarea>
		</mat-form-field>

		@if (task) {
			<button
				type="button"
				mat-stroked-button
				class="simply-edit-task__button"
				color="primary"
				aria-label="Delete task"
				(click)="deleteTask()"
			>
				<mat-icon>delete</mat-icon>
				Delete
			</button>
		} @else {
			<button
				type="button"
				mat-stroked-button
				class="simply-edit-task__button"
				color="primary"
				(click)="cancel()"
			>
				Cancel
			</button>
		}
		<button
			type="submit"
			class="simply-edit-task__button"
			mat-flat-button
			color="primary"
		>
			Save
		</button>
	</form>
</simply-center-page>
