<header
	class="header__container"
	[ngClass]="{
		'large-screen':
			device() === Devices.Small || device() === Devices.WideScreen
	}"
>
	<a
		mat-button
		[routerLink]="isLoggedIn() ? '/task-board' : '/'"
		[attr.aria-label]="
			isLoggedIn() ? 'Navigate to task board' : 'Navigate to home page'
		"
	>
		@if (!isLoggedIn() || device() === Devices.WideScreen) {
			<h1 class="header__logo primary-text">Simply</h1>
		}
		<mat-icon class="header__icon" color="accent">task_alt</mat-icon>
	</a>
	<nav class="header__nav">
		@if (isLoggedIn()) {
			@if (!isOnSettingsPage()) {
				<button
					mat-icon-button
					color="primary"
					class="header__nav-button"
					[cdkMenuTriggerFor]="settingsMenu"
				>
					<mat-icon>menu</mat-icon>
				</button>
				<ng-template #settingsMenu>
					<mat-card class="settings-menu__container" cdkMenu>
						<h3>Logged in as</h3>
						<p>{{ userEmail() }}</p>
						<mat-divider class="settings-menu__divider"></mat-divider>
						<button
							mat-stroked-button
							color="primary"
							class="settings-menu__settings-button"
							routerLink="/settings"
						>
							<mat-icon>settings</mat-icon>
							<span>Settings</span>
						</button>
						<button
							mat-stroked-button
							(click)="logout()"
							color="primary"
							class="settings-menu__button"
						>
							<span>Log out</span>
							<mat-icon>logout</mat-icon>
						</button>
					</mat-card>
				</ng-template>
			}
			@if (isOnSettingsPage()) {
				<button mat-icon-button color="primary" routerLink="/task-board">
					<mat-icon>close</mat-icon>
				</button>
			}
		} @else if (!isOnLoginPage()) {
			<button
				mat-flat-button
				color="primary"
				class="header__nav-button"
				routerLink="/log-in"
			>
				<mat-icon>login</mat-icon>
				<span>Log in</span>
			</button>
		}
	</nav>
</header>
